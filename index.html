<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <title>Awesome Mobile Animations</title>

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimal-ui">

    <link rel="icon" type="image/png" href="img/favicon.png">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/futuretech.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

    <div class="reveal">

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">

            <section class="title" data-background="#0ac2d2">
                <div id="demo-title">
                    <h1 class="one">Awesome</h1>
                    <h1 class="two">Mobile</h1>
                    <h1 class="three">Animations</h1>
                </div>
                <h4>Peter O'Shaughnessy</h4>
                <p><small><a href="http://bit.ly/awesome-mobile-animations">bit.ly/awesome-mobile-animations</a></small></p>
            </section>

            <section data-background="#364395">
                <!-- Introducing me - build prototypes, jack of all trades, this is just an area I'm interested in... -->
                <img width="80%" src="img/Pearson_Without_Strapline_Trans_LoRes.png" alt="Pearson"/>
                <img width="70%" src="img/ft-h-white-trans.png" alt="Future Tech"/>
            </section>

            <section data-background="#0ac2d2">
                <ol class="contents">
                    <li>Intro (fluid apps)</li>
                    <li>Canvas</li>
                    <li>WebGL</li>
                    <li>CSS</li>
                    <li>Web Animations API</li>
                    <li>General Tips</li>
                </ol>
            </section>

            <section data-background="#7bb7fa">
                <section>
                    <h2>1. Intro (fluid apps)</h2>
                </section>
                <section class="bad-example">
                    <div class="demo-boring">
                        <div class="container">

                            <div class="header"><a href="#" class="menu-toggle"></a> <p>Boring App</p></div>

                            <p>Press the menu button!</p>

                            <div class="menu">
                                <ul>
                                    <li>Menu</li>
                                    <li>With</li>
                                    <li>Dull</li>
                                    <li>Transition</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <img class="fragment banned" src="img/banned.png" alt="Banned symbol"/>
                </section>
                <section>
                    <img class="skeuomorphism" src="img/skeuomorphism.jpg" alt="Skueomorphic Passbook app"/>
                    <h3>&ldquo;Without the restrictions of skeuomorphism, the UI is free to behave in any manner without seeming contradictory to its pre-defined environment&rdquo;</h3>
                    <p><a href="http://www.beyondkinetic.com/motion-ui-design-principles">www.beyondkinetic.com/motion-ui-design-principles</a></p>
                </section>
                <section>
                    <h4>Make the motion feel <em>fluid</em></h4>
                    <img src="img/Dots.gif" width="80%"/>
                    <small>Dots app <a href="http://capptivate.co">via capptivate.co</a></small>
                </section>
                <section>
                    <h4>Give it personality</h4>
                    <video controls>
                        <source src="videos/YelpRefresh.mov"/>
                    </video>
                    <p><small>Yelp app <a href="http://capptivate.co">via capptivate.co</a></small></p>
                </section>
                <section>
                    <h4>Make it consistent</h4>
                    <img src="img/Paper.gif" width="80%"/>
                    <small>Paper app <a href="http://capptivate.co">via capptivate.co</a></small>
                </section>
                <section>
                    <h4>Orientate users</h4>
                    <video controls>
                        <source src="videos/Moldiv-orientation.mov"/>
                    </video>
                    <p><small>Moldiv app <a href="http://capptivate.co">via captivate.co</a></small></p>
                </section>
                <section>
                    <h4>But don't go overboard and be annoying!</h4>
                    <img src="img/banana.gif" alt="Dancing banana" width="40%"/>
                    <!--<p><small><a href="http://www.dailydot.com/">www.dailydot.com</a></small></p>-->
                </section>
            </section>

            <section data-background="#54e3d0">
                <h3>Native apps are becoming more fluid</h3>
                <h3 class="fragment">What about mobile <em>web</em> apps?</h3>
            </section>

            <section data-background="#0ac2d2">
                <section>
                    <h2>2. Canvas</h2>
                </section>
                <section>
                    <pre><code class="html">
&lt;canvas id="myCanvas">
    my fallback content
&lt;/canvas>
                    </code></pre>
                    <pre><code class="javascript">
var canvas = document.getElementById('myCanvas');

var ctx = canvas.getContext('2d');

ctx.fillStyle = 'rgb(255, 0, 0)';
ctx.fillRect( 20, 20, 100, 200 );
                    </code></pre>
                </section>
                <section>
                    <video width="80%" controls>
                        <source src="videos/knoggins2.mp4" type="video/mp4;"/>
                        <!--<source src="videos/knoggins2.webm" type="video/webm;"/>-->
                    </video>
                    <p><small>Knoggins (hackathon app)</small></p>
                </section>
                <section>
                    <video width="80%" controls>
                        <source src="videos/run-pixie-run-ios.mp4" type="video/mp4;"/>
                        <!--<source src="videos/run-pixie-run-ios.webm" type="video/webm;"/>-->
                    </video>
                    <p><small><a href="http://www.goodboydigital.com/runpixierun/">www.goodboydigital.com/runpixierun/</a> (Pixi.js)</small></p>
                </section>
            </section>

            <section data-background="#0ac2d2">
                <section>
                    <h2>3. WebGL</h2>
                </section>
                <section>
                    <pre><code class="html">
&lt;canvas id="myCanvas">
my fallback content
&lt;/canvas>
                    </code></pre>
                    <pre><code class="javascript">
var canvas = document.getElementById('myCanvas');

var gl = canvas.getContext('webgl') ||
         canvas.getContext('experimental-webgl');

/* Lots of low level code here! Or use a library */
                    </code></pre>
                    <p><small>See <a href="bit.ly/third-dimension">bit.ly/third-dimension</a> (desktop)</small></p>
                </section>
                <section>
                    <video width="80%" controls>
                        <source src="videos/threejs-webgl-lines.mp4" type="video/mp4;"/>
                        <!--<source src="videos/threejs-webgl-lines.webm" type="video/webm;"/>-->
                    </video>
                    <p><small><a href="http://threejs.org/examples/webgl_lines_sphere.html">threejs.org/examples/webgl_lines_sphere.html</a></small></p>
                </section>
                <section>
                    <h3><em>Without</em> WebGL</h3>
                    <video width="70%" controls>
                        <source src="videos/pixijs-bunny-mark-canvas.mp4" type="video/mp4;"/>
                        <!--<source src="videos/pixijs-bunny-mark-canvas.webm" type="video/webm;"/>-->
                    </video>
                    <p>
                        <small>
                            <a href="http://bit.ly/bunnymark">bit.ly/bunnymark</a> (Pixi.js)<br/>
                            1000 bunnies @ ~14 FPS
                        </small>
                    </p>
                </section>
                <section>
                    <h3><em>With</em> WebGL</h3>
                    <video width="70%" controls>
                        <source src="videos/pixijs-bunny-mark-webgl.mp4" type="video/mp4;"/>
                        <!--<source src="videos/pixijs-bunny-mark-webgl.webm" type="video/webm;"/>-->
                    </video>
                    <p>
                        <small>
                            <a href="http://bit.ly/bunnymark">bit.ly/bunnymark</a> (Pixi.js)<br/>
                            1000 bunnies @ ~58 FPS
                        </small>
                    </p>
                </section>
                <section>
                    <h3>Mobile support</h3>
                    <ul>
                        <li>Chrome for Android <span class="tick">✓</span></li>
                        <li>Firefox for Android <span class="tick">✓</span></li>
                        <li>Opera Mobile <span class="tick">✓</span></li>
                        <li>iOS Safari <span class="fragment tick">✓ :-D</span></li>
                    </ul>
                </section>
            </section>

            <section data-background="#0ac2d2">
                <section>
                    <h2>4. CSS</h2>
                </section>
                <section>
                    <pre id="demo-cssanimation"><code class="css">
.demo {
    transition-property: transform;
    transition-duration: 2s;
}
.demo:hover {
    transform: rotateX(45deg) scale(1.2);
}
                    </code></pre>
                </section>
                <section>
                    <video id="react-touch-demo" controls>
                        <source src="videos/react-touch-demo.mp4" type="video/mp4;"/>
                        <!--<source src="videos/react-touch-demo.webm" type="video/webm;"/>-->
                    </video>
                    <p><small><a href="http://vimeo.com/79659941">React touch demo</a> (menu @ 0:43, gallery @ 2:10)<br/>
                        Live demo at: <a href="http://petehunt.github.io/react-touch">petehunt.github.io/react-touch</a></small></p>
                </section>
                <section>
                    <video width="80%" controls>
                        <source src="videos/cubeslam-ios.mp4" type="video/mp4;"/>
                        <!--<source src="videos/cubeslam-ios.webm" type="video/webm;"/>-->
                    </video>
                    <p><small><a href="https://www.cubeslam.com">cubeslam.com</a></small></p>
                </section>
                <section>
                    <video width="80%" controls>
                        <source src="videos/css3d-parallax.mp4" type="video/mp4;"/>
                        <!--<source src="videos/css3d-parallax.webm" type="video/webm;"/>-->
                    </video>
                    <p><small><a href="http://codepen.io/scottkellum/full/bHEcA/">codepen.io/scottkellum/full/bHEcA/</a></small></p>
                </section>
                <section>
                    <video width="80%" controls>
                        <source src="videos/threejs-css3d-periodic.mp4" type="video/mp4;"/>
                        <!--<source src="videos/threejs-css3d-periodic.webm" type="video/webm;"/>-->
                    </video>
                    <p><small><a href="http://bit.ly/css3d-per">bit.ly/css3d-per</a> (Three.js CSS3DRenderer)</small></p>
                </section>
            </section>

            <section data-background="#54e3d0">
                <section>
                    <h2>5. Web Animations API</h2>
                </section>
                <section>
                    <h3>Declaring in CSS generally best for performance</h3>
                    <pre id="demo-csskeyframes"><code class="css">
@keyframes spin3d {
    0% { transform: rotateY(0deg); }
    100% { transform: rotateY(360deg); }
}
.you-spin-me-right-round-baby-right-round:hover {
    animation: spin3d 3s ease-in-out infinite;
}
                    </code></pre>
                    <small>NB. Vendor prefixes omitted for simplicity</small>
                </section>
                <section>
                    <h3>But you often need to control through JavaScript</h3>
                    <!-- " In order to successfully start a transition, the browser has to acknowledge that the element
                    is in the starting position. There are a few ways to do this. One of the most common ways is to
                    read from one of the element properties that forces the browser to compute layout, thereby ensuring
                    it knows that the element has a starting position before transitioning to the ending position" -->
                    <pre><code class="javascript">
snowFlake.style.transform = 'translate(' + snowLeft + 'px, -100%)';
// wait a frame
snowFlake.offsetWidth;
snowFlake.style.transitionProperty = 'transform';
snowFlake.style.transitionDuration = '1500ms';
snowFlake.style.transform = 'translate(' + snowLeft + 'px, ' +
        window.innerHeight + 'px)';
                    </code></pre>
                    <small><a href="http://updates.html5rocks.com/2014/05/Web-Animations---element-animate-is-now-in-Chrome-36">Example from HTML5Rocks.com</a></small>
                </section>
                <section>
                    <h3>element.animate() gives best of both</h3>
                    <pre><code class="javascript">
snowFlake.animate([
    {transform: 'translate(' + snowLeft + 'px, -100%)'},
    {transform: 'translate(' + snowLeft + 'px, ' + window.innerHeight + 'px)'}
], 1500);
                    </code></pre>

                </section>
                <section>
                    <h3>AnimationPlayer</h3>
                    <pre><code class="javascript">
var player = snowFlake.animate( ... );
// Changed my mind
player.cancel();

var player = snowFlake.animate( ... );
player.onfinish = function(e) {
    console.log('Snowflake landed!');
}
                    </code></pre>
                    <small><a href="http://updates.html5rocks.com/2014/05/Web-Animations---element-animate-is-now-in-Chrome-36">bit.ly/elementanimate</a></small>
                </section>
                <section>
                    <h3>More info at: <br/><a href="http://bit.ly/html5rocks-webanimations">bit.ly/html5rocks-webanimations</a></h3>
                </section>
            </section>

            <section data-background="#0ac2d2">
                <section>
                    <h2>6. General Tips</h2>
                </section>
                <section>
                    <h3>Tip 1: For 60 FPS, you only have 16ms to prepare each frame</h3>
                    <!-- Make sure your rAF callback doesn't take longer, or else the framerate will drop -->
                    <div class="fragment">
                        <ul>
                            <li>It's not very long!</li>
                            <!--
                            <li>Make sure your rAF callback doesn't take longer, or framerate will drop</li>
                            <li>Your callback gets passed a "high resolution" timestamp</li>
                            <li>You can also use performance.now()</li>
                            -->
                        </ul>
                    </div>
                </section>
                <section>
                    <h3>Tip 2: Test, measure, optimise</h3>
                    <div class="fragment">
                        <ul>
                            <li>Use the Timeline feature in your browser's developer tools</li>
                            <li>There's also the <a href="http://updates.html5rocks.com/2012/08/When-milliseconds-are-not-enough-performance-now">High Resolution Time API</a></li>
                            <li>And <a href="https://github.com/mrdoob/stats.js/">stats.js</a> is useful too</li>
                            <!-- 'Frames' shows you spikes down in FPS -->
                            <!-- Can analyse specific browser rendering events e.g. 'Layouts' -->
                            <!-- TODO do more research on this -->
                            <img src="img/devtoolstimeline.png" alt="Timeline frames view" width="80%"/>
                        </ul>
                    </div>
                </section>
                <section>
                    <h3>Tip 3: For now, define animations in CSS if possible</h3>
                    <!-- E.g. fade out, just need to kick off - no need to cancel or control frame by frame -->
                    <!-- JavaScript can be used to toggle classes -->
                    <!-- Browser can optimise & run without hanging JavaScript -->
                    <!-- Runs on GPU -->
                    <!-- "On Chrome for Android in particular (and other browsers are working on similar features) -->
                    <!-- CSS animations have the very desirable property that the browser can often run them even
                    <!-- if JavaScript is running" -->
                    <!-- Not an absolute rule: in some cases, highly optimised JavaScript could be faster on some devices -->
                    <div class="fragment">
                        <ul>
                            <li>Browser can optimise; use GPU, run off main thread</li>
                            <li>Good for simple things you don't need to control frame by frame</li>
                        </ul>
                    </div>
                </section>
                <section>
                    <h3>Tip 4: Make sure you don't hammer the UI thread</h3>
                    <div class="fragment">
                        <ul>
                            <li>Avoid doing work in input handlers such as onscroll</li>
                            <li>Use requestAnimationFrame so the browser calls <em>you</em> when <em>it's</em> ready</li>
                            <li>If you need to do a lot of processing, consider chunking it down or using a Web Worker</li>
                        </ul>
                    </div>
                </section>
                <section>
                    <h3>Tip 5: Stick to: translate, scale, rotate, opacity</h3>
                    <!-- They're the four things a browser can "animate cheaply" -->
                    <!-- "Transition everything else at your own risk" -->
                    <div class="fragment">
                        <ul>
                            <li>The 4 things a browser can "animate cheaply"</li> <!-- because they don't affect document flow -->
                        </ul>
                        <iframe width="600px" height="450px" src="//www.youtube.com/embed/-62uPWUxgcg" frameborder="0" allowfullscreen></iframe>
                    </div>
                </section>
                <section>
                    <h3>Tip 6: Batch DOM operations</h3>
                    <div class="fragment">
                        <ul>
                            <li>The DOM is expensive</li>
                            <li>Frameworks like React and Ractive can handle this for you</li>
                        </ul>
                        <img src="img/virtual-dom.png" alt="Virtual DOM" width="80%"/>
                        <p><small>By <a href="http://slides.com/w33ble/understanding-react#/">Joe Fleming</a></small></p>
                    </div>
                </section>
                <section>
                    <h3>For more info:</h3>
                    <ul class="more-info">
                        <li><a href="http://bit.ly/html5rocks-high-perf-apps">bit.ly/html5rocks-high-perf-apps</a></li>
                        <li><a href="http://bit.ly/html5rocks-jank-busting">bit.ly/html5rocks-jank-busting</a></li>
                    </ul>
                </section>
            </section>

            <!-- This seems a bit redundant now that WebGL is feasible for mobile? -->
            <!--
            <section data-background="#60c7f7">
                <section>
                    <h3>Clearly it's possible</h3>
                    <h3 class="fragment">But it's not always easy...</h3>
                </section>
                <section>
                    <video width="80%" controls>
                        <source src="videos/threejs-css3d-100.mp4" type="video/mp4;"/>
                        <source src="videos/threejs-css3d-100.webm" type="video/webm;"/>
                    </video>
                    <p><small>ZamBlocks experiment (Three.js CSS3DRenderer)</small></p>
                </section>
                <section>
                    <video width="80%" controls>
                        <source src="videos/threejs-canvas-text-optimised.mp4" type="video/mp4;"/>
                        <source src="videos/threejs-canvas-text-optimised.webm" type="video/webm;"/>
                    </video>
                    <p><small>ZamBlocks experiment (Three.js CanvasRenderer)</small></p>
                </section>
                <section>
                    <h3>The story of my struggle...</h3>
                    <p><a href="http://bit.ly/attempting-fast-3d-graphics">bit.ly/attempting-fast-3d-graphics</a></p>
                </section>
            </section>
            -->

            <section data-background="#60c7f7">
                <section>
                    <h2>&ldquo;Great animations <br>make great apps&rdquo;</h2>
                    <!--<small><a href="http://www.raizlabs.com/2012/09/great-animations-great-apps/">www.raizlabs.com/2012/09/great-animations-great-apps/</a></small>-->
                </section>
                <section class="bad-example">
                    <h4>So ditch the boring animations.</h4>
                    <img src="img/boring-animation-app.png" alt="Boring animation app" width="50%"/>
                </section>
                <section>
                    <h3>And make it fluid.</h3>
                    <h3 class="fragment">Make it <em>awesome</em>.</h3>
                </section>
                <!--
                <section>
                    <h4>So remember...</h4>

                    <img src="img/nocrouchrobot.png" alt="No Peter Crouch robot" width="450"/>

                    <p><small><a href="http://blogs.infobae.com/like/2013/08/14/los-10-futbolistas-mas-altos-del-mundo/">blogs.infobae.com</a></small></p>

                    <h3><span class="fragment">Don't be rigid.</span> <span class="fragment">Be fluid.</span></h3>
                </section>
                -->
            </section>

            <section data-background="#0ac2d2">
                <div id="demo-question">
                    <h1 class="one">Thank you</h1>
                    <h2 class="two">Questions?</h2>
                    <h2 class="three">Thoughts?</h2>
                </div>
                <h4>@poshaughnessy</h4>
            </section>

            <section data-background="#7bb7fa">
                <h2>Further reading</h2>
                <ul class="further-reading">
                    <li><a href="http://www.beyondkinetic.com/motion-ui-design-principles">Motion UI Design Principles</a></li>
                    <li><a href="http://capptivate.co/category/patterns/transitions/">Capptivate.co UI transition patterns</a></li>
                    <li><a href="http://www.ui-transitions.com/#motion">Disney Animation Principles</a></li>
                    <li><a href="https://vimeo.com/79659941">React touch demo video</a> includes further advice in comments</li>
                    <!--<li><a href="http://www.html5rocks.com/en/tutorials/speed/animations/">"Leaner, Meaner, Faster Animations with requestAnimationFrame"</a> (HTML5Rocks)</li>-->
                    <li><a href="http://www.html5rocks.com/en/tutorials/speed/high-performance-animations/">High Performance Animations</a> (HTML5Rocks)</li>
                    <li><a href="http://www.html5rocks.com/en/tutorials/speed/rendering/">Jank Busting for Better Rendering Performance</a> (HTML5Rocks)</li>
                    <li><a href="http://wilsonpage.co.uk/preventing-layout-thrashing/">Preventing 'layout thrashing'</a> (Wilson Page)</li>
                    <li><a href="http://third-dimension-webgl-threejs.herokuapp.com">The 3rd Dimension with WebGL &amp; Three.js</a></li>
                    <li><a href="http://www.peteroshaughnessy.com/post/60868538533/attempting-fast-3d-graphics-for-mobile-web-without">Attempting fast 3D graphics for mobile web, without WebGL</a> (Three.js, Pixi.js)</li>
                    <!--<li><a href="http://michaelobriena.github.io/blog/2013/09/28/understanding-the-threejs-css3drenderer/">"Understanding the Three.js CSS3DRenderer"</a></li>-->
                </ul>
            </section>

        </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: true,
            progress: false,
            history: true,
            center: true,

            theme: 'futuretech', // available themes are in /css/theme
            transition: Reveal.getQueryHash().transition || 'concave', // default/cube/page/concave/zoom/linear/fade/none

            // Parallax scrolling
            //parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
            //parallaxBackgroundSize: '2100px 900px',

            // Optional libraries used to extend on reveal.js
            dependencies: [
                { src: 'lib/js/classList.js', condition: function () {
                    return !document.body.classList;
                } },
                { src: 'plugin/markdown/marked.js', condition: function () {
                    return !!document.querySelector('[data-markdown]');
                } },
                { src: 'plugin/markdown/markdown.js', condition: function () {
                    return !!document.querySelector('[data-markdown]');
                } },
                { src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                    hljs.initHighlightingOnLoad();
                } },
                { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () {
                    return !!document.body.classList;
                } },
                { src: 'plugin/notes/notes.js', async: true, condition: function () {
                    return !!document.body.classList;
                } }
            ]
        });

    </script>

    <script src="js/examples.js"></script>

</body>
</html>
